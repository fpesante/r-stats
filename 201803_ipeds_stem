####################################################################
library(dplyr)
setwd("C:/Users/francisco.pesante/Documents/2018/02_proyectos/07_stem")
####################################################################
query9 <- read.csv("query9_awlevel_ctotaltw_2014_15.csv")
#View(query9)

#stem01 <- c("1.0308","1.0901","1.0902","1.0903","1.0904","1.0905","1.0906","1.0907","1.0999","1.1001","1.1002","1.1099","1.1101","1.1102","1.1103","1.1104","1.1105","1.1106","1.1199","1.1201","1.1202","1.1203","1.1299","3.0101","3.0103","3.0104","3.0199","3.0205","3.0502","3.0508","3.0509","3.0601","4.0902","9.0702","10.0304","11.0101","11.0102","11.0103","11.0104","11.0199","11.0201","11.0202","11.0203","11.0299","11.0301","11.0401","11.0501","11.0701","11.0801","11.0802","11.0803","11.0804","11.0899","11.0901","11.1001","11.1002","11.1003","11.1004","11.1005","11.1006","11.1099","13.0501","13.0601","13.0603","15.0101","15.0201","15.0303","15.0304","15.0305","15.0306","15.0399","15.0401","15.0403","15.0404","15.0405","15.0406","15.0499","15.0501","15.0503","15.0505","15.0506","15.0507","15.0508","15.0599","15.0607","15.0611","15.0612","15.0613","15.0614","15.0615","15.0616","15.0699","15.0701","15.0702","15.0703","15.0704","15.0799","15.0801","15.0803","15.0805","15.0899","15.0901","15.0903","15.0999","15.1001","15.1102","15.1103","15.1199","15.1201","15.1202","15.1203","15.1204","15.1299","15.1301","15.1302","15.1303","15.1304","15.1305","15.1306","15.1399","15.1401","15.1501","15.1502","15.1503","15.1599","15.1601","15.9999","28.0501","28.0502","28.0505","29.0201","29.0202","29.0203","29.0204","29.0205","29.0206","29.0207","29.0299","29.0301","29.0302","29.0303","29.0304","29.0305","29.0306","29.0307","29.0399","29.0401","29.0402","29.0403","29.0404","29.0405","29.0406","29.0407","29.0408","29.0409","29.0499","29.9999","30.0101","30.0601","30.0801","30.1001","30.1701","30.1801","30.1901","30.2501","30.2701","30.3001","30.3101","30.3201","30.3301","41.0101","41.0204","41.0205","41.0299","41.0301","41.0303","41.0399","41.9999","42.2701","42.2702","42.2703","42.2704","42.2705","42.2706","42.2707","42.2708","42.2709","42.2799","43.0106","43.0116","45.0301","45.0603","45.0702","49.0101","51.1002","51.1005","51.1401","51.2003","51.2004","51.2005","51.2006","51.2007","51.2009","51.201","51.2202","51.2205","51.2502","51.2503","51.2504","51.2505","51.2506","51.251","51.2511","51.2706","52.1301","52.1302","52.1304","52.1399", "14.0101","14.0102","14.0201","14.0301","14.0401","14.0501","14.0601","14.0701","14.0702","14.0799","14.0801","14.0802","14.0803","14.0804","14.0805","14.0899","14.0901","14.0902","14.0903","14.0999","14.1001","14.1003","14.1004","14.1099","14.1101","14.1201","14.1301","14.1401","14.1801","14.1901","14.2001","14.2101","14.2201","14.2301","14.2401","14.2501","14.2701","14.2801","14.3201","14.3301","14.3401","14.3501","14.3601","14.3701","14.3801","14.3901","14.4001","14.4101","14.4201","14.4301","14.4401","14.4501","14.999","26.0101","26.0102","26.0202","26.0203","26.0204","26.0205","26.0206","26.0207","26.0208","26.0209","26.0299","26.0301","26.0305","26.0307","26.0308","26.0399","26.0401","26.0403","26.0404","26.0406","26.0407","26.0499","26.0502","26.0503","26.0504","26.0505","26.0506","26.0507","26.0508","26.0599","26.0701","26.0702","26.0707","26.0708","26.0709","26.0799","26.0801","26.0802","26.0803","26.0804","26.0805","26.0806","26.0807","26.0899","26.0901","26.0902","26.0903","26.0904","26.0905","26.0907","26.0908","26.0909","26.0911","26.0912","26.0999","26.1001","26.1002","26.1003","26.1004","26.1005","26.1006","26.1007","26.1099","26.1101","26.1102","26.1103","26.1104","26.1199","26.1201","26.1301","26.1302","26.1303","26.1304","26.1305","26.1306","26.1307","26.1308","26.1309","26.1399","26.1401","26.1501","26.1502","26.1503","26.1504","26.1599","26.999","27.0101","27.0102","27.0103","27.0104","27.0105","27.0199","27.0301","27.0303","27.0304","27.0305","27.0306","27.0399","27.0501","27.0502","27.0503","27.0599","27.999") 

stem_cipcodes_2014_15 <- filter(query9, CIPCODE %in% stem01)

#View(stem_cipcodes_2014_15)

write.csv(stem_cipcodes_2014_15,file="stem_cipcodes_totalw_2014_15.csv",row.names = F)
# # # # # #
stem02 <-c("40.0101","40.0201","40.0202","40.0203","40.0299","40.0401","40.0402","40.0403","40.0404","40.0499","40.0501","40.0502","40.0503","40.0504","40.0506","40.0507","40.0508","40.0509","40.0511","40.0599","40.0601","40.0602","40.0603","40.0604","40.0605","40.0606","40.0607","40.0699","40.0801","40.0802","40.0804","40.0805","40.0806","40.0807","40.0808","40.0809","40.0899","40.1001","40.1002","40.9999")

stem_cipcodes40_2014_15 <- filter(query9, CIPCODE %in% stem02)

#View(stem_cipcodes40_2014_15)

write.csv(stem_cipcodes40_2014_15,file="stem_cipcodes40_totalw_2014_15.csv",row.names = F)
####################################################################
# Fuente de sectores stem: https://www.ice.gov/sites/default/files/documents/Document/2016/stem-list.pdf
# Reference:https://stackoverflow.com/questions/35845903/dplyr-filter-value-is-contained-in-a-vector
